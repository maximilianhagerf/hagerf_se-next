import { useEffect } from "react";
import { motion, useAnimation } from "framer-motion";
import { useInView } from "react-intersection-observer";
import styles from "../styles/modules/Welcome.module.css";

const pathVariants = {
  hidden: {
    opacity: 0,
    pathLength: 0,
  },
  visible: (custom) => ({
    opacity: 1,
    pathLength: 1,
    transition: {
      opacity: {
        duration: 0,
        delay: custom[0],
      },
      pathLength: {
        duration: custom[1],
        ease: custom[2],
        when: "beforeChildren",
        delay: custom[0] * 1,
      },
    },
  }),
};

function Welcome() {
  const controls = useAnimation();
  const { ref, inView } = useInView({
    threshold: 1,
  });

  useEffect(() => {
    if (inView) {
      controls.start("visible");
    }
    // if (!inView) {
    //   controls.start("hidden");
    // }
  }, [controls, inView]);

  return (
    <div className={styles.Welcome}>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        x="0"
        y="0"
        enableBackground="new 0 0 392.8 78"
        viewBox="0 0 392.8 78"
        className={styles.Svg}
        ref={ref}
      >
        <motion.path
          variants={pathVariants}
          initial="hidden"
          animate={controls}
          custom={[0, 0.5, "easeInOut"]}
          d="M.5 28.8c0-10.7 41.6-26.6 48.7-15.6 6.8 11.1-32.9 53.2-27 63 1.2 2 3.6 1.5 7.7-.5 14.7-7.9 43.7-39.2 52.7-43.9.5-.6 1.4.8.5 1v.2c-4.2 6.3-22.8 40.8-5.9 37.9C98 65.3 132 17.8 135.1.5"
          className={styles.Line}
        />
        <motion.path
          variants={pathVariants}
          initial="hidden"
          animate={controls}
          custom={[0.7, 0.5, "easeIn"]}
          d="M115.6 53.8c10.5 3.7 34.2-9.2 31.2-18.8-2-3.9-11.1-2-14.2 9.6-.9 2.8-.6 5.3 0 8 8.4 21 45-14 52-24.8 1.7-2 14.4-24 7.1-17.1-10.4 15.7-20.4 61.5 5.5 42.4 1-.7 2-1.4 3.1-2.4 1.4-1.3 3.2-4.7 4-6 6.7-10.6 17-12.8 17.8-6.6m-87.9 12.5"
          className={styles.Line}
        />
        <motion.path
          variants={pathVariants}
          initial="hidden"
          animate={controls}
          custom={[1, 1, "easeIn"]}
          // d="M259.7 35.1c.6 1.4-2.7 1.1-2.7 1.1-6.1-.2-12 4.4-15.4 9.8-19.3 22.3-45.3 23.6-41 7.2 2-13 20.5-24.9 21.5-15.1"
          // d="M222.1,38.1C221.1,28.300000000000004 202.6,40.2 200.6,53.2C196.3,69.6 222.29999999999998,68.3 241.6,46C245,40.6 250.9,36 257,36.2C257,36.2 260.3,36.5 259.7,35.1"
          d="m222.1 38.1c-1-9.8-19.5 2.1-21.5 15.1-4.3 16.4 21.7 15.1 41-7.2 3.4-5.4 9.3-10 15.4-9.8 0 0 3.3 0.3 2.7-1.1"
          className={styles.Line}
        />
        <motion.path
          variants={pathVariants}
          initial="hidden"
          animate={controls}
          custom={[1.9, 1.5, "easeOut"]}
          // d="M392.3 49.1c-19.1 17.8-33.8 13.6-32.8-2.3 1.1-13.2 15.3-21.7 18.8-16.5 4.2 5.8-12.8 15.6-21.1 20.7-33.3 23-10.7-10.1-17.5-12.8-3.6-2-15.5 8.9-23.6 14.6-1.7 1.2-2.9 1.7-3.1.5 1.7-20.9-12.9-5.3-25.2 3.7-2 1.5-2.7 1.7-2.7 1.5 9.4-27.7 7.2-24.3-20.6-21.1-10.2-.2-8.6-8.5-2.9-2.9 7.3 9.8-7.5 32.2-18.1 27.5-12.9-7.1 2.7-26.6 13.5-25.7"
          // d="M257,36.30000000000001C246.19999999999996,35.400000000000006 230.59999999999997,54.900000000000006 243.49999999999997,62.00000000000001C254.09999999999997,66.70000000000002 268.9,44.30000000000001 261.59999999999997,34.50000000000001C255.89999999999995,28.900000000000006 254.29999999999995,37.2 264.49999999999994,37.400000000000006C292.29999999999995,34.2 294.49999999999994,30.800000000000008 285.09999999999997,58.50000000000001C285.09999999999997,58.70000000000001 285.79999999999995,58.50000000000001 287.79999999999995,57.00000000000001C300.09999999999997,48.00000000000001 314.69999999999993,32.400000000000006 312.99999999999994,53.300000000000004C313.2,54.50000000000001 314.4,54.00000000000001 316.09999999999997,52.800000000000004C324.2,47.1 336.09999999999997,36.2 339.7,38.2C346.5,40.9 323.9,74 357.2,51C365.5,45.900000000000006 382.5,36.1 378.3,30.300000000000004C374.8,25.100000000000005 360.6,33.60000000000001 359.5,46.800000000000004C358.5,62.7 373.2,66.9 392.3,49.1"
          d="m257 36.3c-10.8-0.9-26.4 18.6-13.5 25.7 10.6 4.7 25.4-17.7 18.1-27.5-5.7-5.6-7.3 2.7 2.9 2.9 27.8-3.2 30-6.6 20.6 21.1 0 0.2 0.7 0 2.7-1.5 12.3-9 26.9-24.6 25.2-3.7 0.2 1.2 1.4 0.7 3.1-0.5 8.1-5.7 20-16.6 23.6-14.6 6.8 2.7-15.8 35.8 17.5 12.8 8.3-5.1 25.3-14.9 21.1-20.7-3.5-5.2-17.7 3.3-18.8 16.5-1 15.9 13.7 20.1 32.8 2.3"
          className={styles.Line}
        />
      </svg>
    </div>
  );
}

export default Welcome;
